<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Free License Key</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <h1>ğŸ”‘ Get Free License Key</h1>
            <div class="nav-links">
                <a href="/">Home</a>
                <a href="/get-key">Get Key</a>
                <a href="/verify">Verify</a>
                <a href="/admin">Admin</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="get-key-container">
            <!-- Initial State -->
            <div id="initialState" class="get-key-box">
                <div class="key-hero">
                    <div class="hero-icon">ğŸ</div>
                    <h2>Get Your Free Trial License Key</h2>
                    <p class="subtitle">Click the button below to instantly generate your license key</p>
                </div>

                <div class="key-features">
                    <div class="feature-item">
                        <span class="feature-icon">âš¡</span>
                        <span>Instant Generation</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ“…</span>
                        <span>7 Days Valid</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ”</span>
                        <span>Secure & Encrypted</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ’»</span>
                        <span>1 Device Activation</span>
                    </div>
                </div>

                <button onclick="checkAndGenerate()" class="btn btn-primary btn-large btn-block" id="generateBtn">
                    <span class="btn-icon">ğŸš€</span> Generate Free License Key
                </button>

                <div class="info-note">
                    <strong>â„¹ï¸ Note:</strong> You can generate 1 free key every 24 hours
                </div>
            </div>

            <!-- Loading State -->
            <div id="loadingState" class="get-key-box" style="display: none;">
                <div class="loading-animation">
                    <div class="spinner"></div>
                    <h3>Generating Your License Key...</h3>
                    <p>Please wait a moment</p>
                </div>
            </div>

            <!-- Success State -->
            <div id="successState" class="get-key-box" style="display: none;">
                <div class="success-header">
                    <div class="success-icon">âœ…</div>
                    <h2>License Key Generated!</h2>
                    <p class="subtitle">Your free trial key is ready to use</p>
                </div>

                <div class="key-result">
                    <div class="key-label">Your License Key:</div>
                    <div class="key-display-large">
                        <input type="text" id="generatedKeyValue" readonly>
                        <button onclick="copyGeneratedKey()" class="btn btn-success" id="copyBtn">
                            ğŸ“‹ Copy
                        </button>
                    </div>
                    
                    <div class="key-details">
                        <div class="detail-row">
                            <span class="label">ğŸ« Type:</span>
                            <span class="badge badge-trial">FREE TRIAL</span>
                        </div>
                        <div class="detail-row">
                            <span class="label">ğŸ“… Generated:</span>
                            <span id="keyGenerated"></span>
                        </div>
                        <div class="detail-row">
                            <span class="label">â° Valid Until:</span>
                            <span id="keyExpiry"></span>
                        </div>
                        <div class="detail-row">
                            <span class="label">ğŸ”„ Max Activations:</span>
                            <span>1 device</span>
                        </div>
                        <div class="detail-row">
                            <span class="label">ğŸ“Š Status:</span>
                            <span class="badge badge-active">ACTIVE</span>
                        </div>
                    </div>

                    <div class="key-actions">
                        <a href="/verify" class="btn btn-primary">
                            <span class="btn-icon">âœ…</span> Verify This Key
                        </a>
                        <button onclick="downloadKey()" class="btn btn-secondary">
                            <span class="btn-icon">ğŸ’¾</span> Download Info
                        </button>
                    </div>
                </div>

                <div class="warning-box">
                    <strong>âš ï¸ Important Instructions:</strong>
                    <ul>
                        <li><strong>Save this key securely</strong> - You won't be able to see it again</li>
                        <li>This is a <strong>trial key valid for 7 days</strong></li>
                        <li>Can be activated on <strong>1 device only</strong></li>
                        <li>You can generate another key in <strong>24 hours</strong></li>
                        <li>For premium/extended keys, contact admin</li>
                    </ul>
                </div>

                <button onclick="resetForm()" class="btn btn-secondary btn-block" style="margin-top: 1rem;">
                    â† Back to Home
                </button>
            </div>

            <!-- Rate Limit State -->
            <div id="rateLimitState" class="get-key-box" style="display: none;">
                <div class="rate-limit-content">
                    <div class="rate-limit-icon">â³</div>
                    <h2>Rate Limit Reached</h2>
                    <p>You've already generated a free key today</p>
                    
                    <div class="countdown-box">
                        <div class="countdown-label">Next key available in:</div>
                        <div class="countdown-timer" id="rateLimitTimer">23:59:59</div>
                    </div>

                    <div class="rate-limit-info">
                        <p><strong>Why the limit?</strong></p>
                        <p>To ensure fair usage, each user can generate 1 free trial key per day.</p>
                    </div>

                    <div class="upgrade-section">
                        <h3>Need More Keys?</h3>
                        <p>Upgrade to premium for unlimited key generation</p>
                        <a href="/admin" class="btn btn-primary">Contact Admin</a>
                    </div>

                    <button onclick="goHome()" class="btn btn-secondary btn-block" style="margin-top: 1rem;">
                        â† Back to Home
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/key-generator.js') }}"></script>
</body>
</html>
